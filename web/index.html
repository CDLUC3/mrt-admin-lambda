<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css"></link>
    <link rel="stylesheet" type="text/css" href="api-table.css"/>
    <script type="text/javascript" src="api-table.js"></script>
    <script src="sorttable.js" type="text/javascript"></script>
  </head>
  <body>
    <h1>Hello</h1>
    <p><a href="index.html">Home</a></p>
    <button onclick="$('tr.row').toggle()">Filter Totals/Details</button>
    <button onclick="$('tr.nodata').toggle()">Filter Data</button>
    <button onclick="$('tr.total').toggle()">Totals On/Off</button>
    <button id="exportTable">Export</button>
    <div id="menu">

      <h3>Understanding Merritt Content</h3>
      <ul>
        <li><a href="index.html?path=collections">File Counts by Collections</a></li>
        <li><a href="index.html?path=owners">File Counts by Owner</a></li>
        <li><a href="index.html?path=mimes">Mime Groups</a></li>
      </ul>

      <h3>Campus Invoices</h3>
      <ul>
        <li><a href="index.html?path=invoices&fy=2020&iterate=1">FY2020 Invoices</a></li>
        <li><a href="index.html?path=invoices&fy=2019&iterate=1">FY2019 Invoices</a></li>
        <li><a href="index.html?path=invoices&fy=2019&iterate=1&as_of=2020-01-01">FY2019 Invoices- Proj from Jan 1</a></li>
        <li><a href="index.html?path=invoices&fy=2018&iterate=1">FY2018 Invoices</a></li>
        <li><a href="index.html?path=invoices&fy=2017&iterate=1">FY2017 Invoices</a></li>
      </ul>

      <h3>Metadata Queries: Objects</h3>
      <ul>
        <li>
          <form action="index.html">
            Object(s) by Ark:
            <input name="ark" type="text" value="ark:/" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_ark"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
        <li>
          <form action="index.html">
            Object(s) by Title:
            <input name="title" type="text" value="" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_title"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
        <li>
          <form action="index.html">
            Object(s) by Author:
            <input name="author" type="text" value="" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_author"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
        <li>
          <form action="index.html">
            Object(s) by Local ID:
            <input name="localid" type="text" value="" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_local_id"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
      </ul>

      <h3>Metadata Queries: Files</h3>
      <ul>
        <li>
          <form action="index.html">
            Object(s) by Filename:
            <input name="file" type="text" value="" size=60 title="Use a % as a wildcard search string"/>
            <br/>
            Collection (required for a performant query):
            <input name="coll" type="text" value="cdl_uc3" size=40 />
            <input name="path" type="hidden" value="files_by_name_coll"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
      </ul>

      <h3>Interesting Use Cases Content</h3>
      <ul>
        <li><a href="index.html?path=objects_large">Large Objects</a></li>
        <li><a href="index.html?path=objects_many_files">Objects with Many Files</a></li>
        <li><a href="index.html?path=count_objects&iterate=1">Object Counts by Owner and Collection</a></li>
      </ul>

      <h3>Queries by ingest date</h3>
      <ul>
        <li><a href="index.html?path=collections_by_time_count_producer&iterate=1">Producer Files Added by Date (All time)</a></li>
        <li><a href="index.html?path=collections_by_time_count&iterate=1">Files Added by Date (All time)</a></li>
        <li><a href="index.html?path=collections_by_time_size&iterate=1">File Size Added by Date (All time)</a></li>
        <li><a href="index.html?path=collections_by_time_count_producer&interval=days&iterate=1">Producer Files Added by Date (Last week)</a></li>
        <li><a href="index.html?path=collections_by_time_count&interval=days&iterate=1">Files Added by Date (Last week)</a></li>
        <li><a href="index.html?path=collections_by_time_size&interval=days&iterate=1">File Size Added by Date (Last week)</a></li>
        <li><a href="index.html?path=collections_by_time_count_producer&interval=weeks&iterate=1">Producer Files Added by Date (Last 4 weeks)</a></li>
        <li><a href="index.html?path=collections_by_time_count&interval=weeks&iterate=1">Files Added by Date (Last 4 weeks)</a></li>
        <li><a href="index.html?path=collections_by_time_size&interval=weeks&iterate=1">File Size Added by Date (Last 4 weeks)</a></li>
        <li><a href="index.html?path=objects_recent">Recent object updates by collection (object details)</a></li>
      </ul>

      <h3>Operational Information</h3>
      <ul>
        <li><a href="index.html?path=audit_status">Audit - Irregular Status</a></li>
        <li><a href="index.html?path=audit_oldest">Audit - Oldest Unprocessed Item</a></li>
        <li><a href="index.html?path=audit_processed&iterate=1">Audits processed over time</a></li>
        <li><a href="index.html?path=nodes">Storage Nodes</a></li>
        <li><a href="index.html?path=wasabi">Wasabi Migration</a></li>
        <li><a href="index.html?path=replication_needed">Replication needed</a></li>
        <li><a href="index.html?path=tbd">TBD: Download reqeusts by date (Storage Logs -> Splunk? -> Database)</a></li>
        <li><a href="index.html?path=tbd">TBD: Ingests in progress (Lambda -> Ingest -> ZQ)</a></li>
      </ul>

      <h3>Source Code</h3>
      <ul>
        <li><a href="https://github.com/CDLUC3/mrt-admin-lambda/tree/main/web">Web Interface</a></li>
        <li><a href="https://github.com/CDLUC3/mrt-admin-lambda/tree/main/src">Lambda Handler</a></li>
        <li><a href="https://github.com/CDLUC3/mrt-admin-lambda/tree/main/src/queries">Queries</a></li>
        <li><a href="https://github.com/CDLUC3/mrt-admin-lambda/blob/main/test/app.rb">Test Driver - Sinatra</a></li>
      </ul>

    </div>
    <div id="data">
      <table id="data-table" class="sortable results"/>
    </div>
    <div id="in-progress-container">
      <div id="in-progress">
        <h2>Query in Progress</h2>
        <div id="iprogress">--</div>
      </div>
    </div>
    <script src="sorttable.js" type="text/javascript"></script>
  </body>
</html>
