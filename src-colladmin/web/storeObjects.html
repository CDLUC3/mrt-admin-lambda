<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css"></link>
    <link rel="stylesheet" type="text/css" href="api-table.css"/>
    <script type="text/javascript" src="coll-lambda.base.js"></script>
    <script type="text/javascript" src="api-table.js"></script>
    <script type="text/javascript" src="storage.js"></script>
    <script src="sorttable.js" type="text/javascript"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="form-body">
    <h1>Manage Object Storage</h1>
    {{{COLLADMINNAV}}}
    <h2>Locate Objects</h2>
    <div class="indent">
      <form method="POST">
        <div>
          <select name="mode">
            <option value="ark" {{#ISARK}}selected{{/ISARK}}>Search by ark</option>
            <option value="localid" {{#ISLOC}}selected{{/ISLOC}}>Search by localid</option>
            <option value="id" {{#ISID}}selected{{/ISID}}>Search by object_id</option>
          </select>
        </div>
        <p class="proval">
          <label for="owner">Owner</label>
          <select id="owner" name="owner">
            <option value="">--ANY Owner--</option>
            {{#OWNERS}}
            <option value="{{ark}}" {{#selected}}selected{{/selected}}>{{name}}</option>
            {{/OWNERS}}
          </select>
        </p>
        <div>
          <fieldset>
            <legend>Object(s). Place one or more identifiers on each line below.</legend>
            <textarea id="objlist" name="objlist" rows="5" cols="40">{{OBJLIST}}</textarea>
          </fieldset>
        </div>
        <div>
          <input type="submit" value="Search"/>
        </div>
      </form>        
    </div>
    <h2>Objects</h2>
    <table class="sortable results">
      <caption>{{OBJSCNT}} Objects</caption>
      <thead>
        <tr>
          <th>Object Id</th>
          <th>Ark</th>
          <th>Collection</th>
          <th>Owner</th>
          <th>Local Id</th>
          <th>Title</th>
          <th>Created</th>
          <th>Last Replicated</th>
          <th>Num Unverified</th>
          <th>Last Verified</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#OBJS}}
        <tr>
          <td><a href="{{ADMINTOOL_HOME}}?path=filelist&id={{id}}">{{id}}</a></td>
          <th>{{ark}}</th>
          <td>{{coll}}</td>
          <td>{{owner}}</td>
          <td>{{localid}}</td>
          <td>{{title}}</td>
          <td>{{created}}</td>
          <td>{{last_replicated}}</td>
          <td>{{unverified}}</td>
          <td>{{last_verified}}</td>
          <td>
            <button 
              title="View node specific details for the object"
              class="colladmin"
              onclick="javascript:document.location='storeObjectNodes.html?id={{id}}'"
            >Object Nodes</button>
            <button 
              title="Delete an object from Merritt"
              class="colladmin storage-delete-obj"
              onclick="javascript:document.location='https://cdluc3.github.io/mrt-doc/diagrams/store-admin-del-node-obj'"
            >Delete Object ðŸš§</button>
            <button 
              data-id="{{id}}"
              title="Trigger re-replication of an object."
              class="colladmin storage-force-replic-for-object"
            >Trigger Replication {{#IS_PROD}}ðŸš§{{/IS_PROD}}</button>
          </td>
        </tr>
        {{/OBJS}}
      </tbody>      
    </table>
    </div>
  </body>
</html>
