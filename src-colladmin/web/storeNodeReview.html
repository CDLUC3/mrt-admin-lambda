<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css"></link>
    <style type="text/css">
    {{{APITABLE_CSS}}}
    </style>
    <script type="text/javascript">
    {{{COLL_LAMBDABASE_JS}}}
    </script>
    <script type="text/javascript">
    {{{APITABLE_JS}}}
    </script>
    <script type="text/javascript">
    {{{STORAGE_JS}}}
    </script>
    <script src="sorttable.js" type="text/javascript"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="form-body">
    <h1>Review Storage Node Mismatches for {{nodenum}}: Scan {{scanid}}</h1>
    {{{COLLADMINNAV}}}
    <h4>
      {{#scan_prev}}
      <a href="storeNodeReview.html?nodenum={{nodenum}}&scanid={{scanid}}&limit={{scan_limit}}&offset={{scan_prev}}">
        Previous {{scan_limit}} ({{scan_prev}})
      </a>
      {{/scan_prev}}
      - {{scan_count}} Files ({{scan_offset}}) -
      {{#scan_next}}
      <a href="storeNodeReview.html?nodenum={{nodenum}}&scanid={{scanid}}&limit={{scan_limit}}&offset={{scan_next}}">
        Next {{scan_limit}} ({{scan_next}})
      </a>
      {{/scan_next}}
    </h4>
    <p>TODO: Need to figure out how specific deletes could be approved/rejected/partially processed.</p>
    <p>
      <button
        title="initiate the delete for a set of untracked storage keys that are not in the inventory database"
        class="colladmin storage-delete-node-key"
        onclick="javascript:document.location='https://cdluc3.github.io/mrt-doc/diagrams/store-admin-del-node-keys'"
      >Delete Key (will appear in listing) ðŸš§</button>
    </p>
    <div>
      <table class="sortable results">
        <thead>
          <tr>
            <th>Node</th>
            <th>Ark</th>
            <th>Key</th>
            <th>File Created</th>
            <th>Size</th>
            <th>Maint Status</th>
            <th>Maint Type</th>
            <th>Note</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#REVIEW}}
          <tr>
            <th>{{num}}</th>
            <th class="name">{{ark}}</th>
            <th class="name">{{key}}</th>
            <td>{{file_created}}</td>
            <td class="bytes" data="{{size}}">{{size_fmt}}</td>
            <td>{{maint_status}}</td>
            <td>{{maint_type}}</td>
            <td>{{note}}</td>
            <td>
              <button 
                title="Mark untracked file for delete"
                class="colladmin storage-delete-node-key"
                data-maint-id="{{maintid}}"
              >Mark for Delete</button>
              
              <button 
                title="Mark untracked file for hold"
                class="colladmin storage-hold-node-key"
                data-maint-id="{{maintid}}"
              >Mark for Hold</button>

              <button 
                title="Mark untracked file for review"
                class="colladmin storage-review-node-key"
                data-maint-id="{{maintid}}"
              >Mark for Review</button>
            </td>
          </tr>
          {{/REVIEW}}
        </tbody>
      </table>
    </div>
  </body>
</html>
