<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css"></link>
    <style type="text/css">
    {{{APITABLE_CSS}}}
    </style>
    <script type="text/javascript">
    {{{COLL_LAMBDABASE_JS}}}
    </script>
    <script type="text/javascript">
    {{{APITABLE_JS}}}
    </script>
    <script type="text/javascript">
    {{{STORAGE_JS}}}
    </script>
    <script src="sorttable.js" type="text/javascript"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="form-body">
    <h1>Review Storage Node with Status {{maint_status}} for {{nodenum}}<span class="scan-{{scanid}}">: Scan {{scanid}}</span></h1>
    <p>
    {{{COLLADMINNAV2}}}
    <span> / </span>
    <a href='/web/storeNodes.html'>Storage Nodes</a>
    <span> / </span>
    <a href='/web/storeNodeReview.html?nodenum={{nodenum}}&maint_status=all'>Review Node {{nodenum}}</a>
    </p>
    <p>
      <ul>
        <li><a href='/web/storeNodeReview.html?nodenum={{nodenum}}&maint_status=review'>Review Node Review for {{nodenum}}</a></li>
        <li><a href='/web/storeNodeReview.html?nodenum={{nodenum}}&maint_status=hold'>Review Node Hold for {{nodenum}}</a></li>
        <li><a href='/web/storeNodeReview.html?nodenum={{nodenum}}&maint_status=delete'>Review Node Delete for {{nodenum}}</a></li>
      </ul>
    </p>
    <h4>Pagination</h4>
    <div>
      {{count}} Files: 
      {{#scan_prev}}
      <a href="storeNodeReview.html?nodenum={{nodenum}}&scanid={{scanid}}&limit={{scan_limit}}&offset={{scan_prev}}&maint_status={{maint_status}}">
        Previous {{scan_limit}} ({{scan_prev}})
      </a>
      {{/scan_prev}}
      - {{scan_count}} Files ({{scan_offset}}) -
      {{#scan_next}}
      <a href="storeNodeReview.html?nodenum={{nodenum}}&scanid={{scanid}}&limit={{scan_limit}}&offset={{scan_next}}&maint_status={{maint_status}}">
        Next {{scan_limit}} ({{scan_next}})
      </a>
      {{/scan_next}}
    </div>
    <h4>Page Actions</h4>
    <div>
      <button 
      title="Mark page for delete"
        class="colladmin storage-delete-node-page maint-delete-{{maint_status}}"
      >Mark page for Delete</button>
      <button 
      title="Mark page for hold"
        class="colladmin storage-hold-node-page maint-hold-{{maint_status}}"
      >Mark page for Hold</button>
      <button 
      title="Mark page for review"
        class="colladmin storage-review-node-page maint-review-{{maint_status}}"
      >Mark page for Review</button>
      {{#is_delete}}
      <button 
      title="Process ALL keys marked for delete"
        class="colladmin storage-perform-delete-node-all"
      >Delete ALL marked for delete ðŸš§{{#IS_PROD}}ðŸš§{{/IS_PROD}}</button>
      {{/is_delete}}
    </div>
    <h4>Node Key List</h4>
    <div>
      <table class="sortable results">
        <thead>
          <tr>
            <th>Node</th>
            <th>Ark</th>
            <th>Key</th>
            <th>File Created</th>
            <th>Size</th>
            <th>Maint Status</th>
            <th>Maint Type</th>
            <th>Note</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#REVIEW}}
          <tr>
            <th>{{num}}<input type="hidden" class="maintid" value="{{maintid}}"/></th>
            <th class="name">{{ark}}</th>
            <th class="name">{{key}}</th>
            <td>{{file_created}}</td>
            <td class="bytes" data="{{size}}">{{size_fmt}}</td>
            <td>{{maint_status}}</td>
            <td>{{maint_type}}</td>
            <td>{{note}}</td>
            <td>
              <button 
                title="Mark untracked file for delete"
                class="colladmin storage-delete-node-key maint-delete-{{maint_status}}"
                data-maint-id="{{maintid}}"
              >Mark for Delete</button>
              
              <button 
                title="Mark untracked file for hold"
                class="colladmin storage-hold-node-key maint-hold-{{maint_status}}"
                data-maint-id="{{maintid}}"
              >Mark for Hold</button>

              <button 
                title="Mark untracked file for review"
                class="colladmin storage-review-node-key maint-review-{{maint_status}}"
                data-maint-id="{{maintid}}"
              >Mark for Review</button>

              {{#is_delete}}
              <button 
                title="Initiate delete of mismatched item"
                class="colladmin storage-perform-delete-node-key"
                data-maint-id="{{maintid}}"
              >Delete from Cloud Storage {{#IS_PROD}}ðŸš§{{/IS_PROD}}</button>
              {{/is_delete}}
            </td>
          </tr>
          {{/REVIEW}}
        </tbody>
      </table>
    </div>
  </body>
</html>
