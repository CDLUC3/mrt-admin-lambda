<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css"></link>
    <style type="text/css">
    {{{APITABLE_CSS}}}
    </style>
    <script type="text/javascript">
    {{{COLL_LAMBDABASE_JS}}}
    </script>
    <script type="text/javascript">
    {{{APITABLE_JS}}}
    </script>
    <script type="text/javascript">
    {{{STORAGE_JS}}}
    </script>
    <script src="sorttable.js" type="text/javascript"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="form-body">
    <h1>Manage Object Storage Nodes for Object <a href="{{ADMINTOOL_HOME}}?path=filelist&id={{ID}}">{{ID}}</a></h1>
    {{{COLLADMINNAV}}}

    <h2>Object Actions</h2>
    <table class="sortable results">
      <thead>
        <tr>
          <th>Object Id</th>
          <th>Ark</th>
          <th>Collection</th>
          <th>Owner</th>
          <th>Local Id</th>
          <th>Title</th>
          <th>Created</th>
          <th>Last Replicated</th>
          <th>Num Unverified</th>
          <th>Last Verified</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#OBJS}}
        <tr>
          <td><a href="{{ADMINTOOL_HOME}}?path=filelist&id={{id}}">{{id}}</a></td>
          <th>{{ark}}</th>
          <td>{{coll}}</td>
          <td>{{owner}}</td>
          <td>{{localid}}</td>
          <td>{{title}}</td>
          <td>{{created}}</td>
          <td>{{last_replicated}}</td>
          <td>{{unverified}}</td>
          <td>{{last_verified}}</td>
          <td>
            {{{OBJBUTTON}}}
          </td>
        </tr>
        {{/OBJS}}
      </tbody>      
    </table>

    <h2>Object Node Actions</h2>
    <table class="sortable results">
      <thead>
        <tr>
          <th>Role</th>
          <th>Node Num</th>
          <th>Node Name</th>
          <th>Access Mode</th>
          <th>Obj Created</th>
          <th>Replic Created</th>
          <th>Num Unverified</th>
          <th>Last Audited</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#OBJNODES}}
        <tr>
          <th>{{role}}</th>
          <td>{{number}}</td>
          <td>{{name}}</td>
          <td>{{access_mode}}</td>
          <td>{{created}}</td>
          <td>{{replicated}}</td>
          <td>{{unverified}}</td>
          <td>{{last_verified}}</td>
          <td>
            <button 
              data-id="{{ID}}"
              data-node-id="{{nodeid}}"
              title="Re-run all audits for this node."
              class="colladmin storage-force-audit-for-object"
            >Re-audit All Files</button>
            <button 
              data-id="{{ID}}"
              data-node-id="{{nodeid}}"
              title="Re-run the unverified audits for this node."
              class="colladmin storage-rerun-audit-for-object"
            >Re-audit Unverified</button>
            {{#secondary}}
            <button 
              data-ark="{{ARK}}"
              data-node-num="{{number}}"
              data-node-name="{{name}}"
              title="Delete a secondary copy of an object.  Cannot be run on the primary node."
              class="colladmin storage-del-object-from-node"
            >Delete Object from Node ðŸš§</button>
            {{/secondary}}
          </td>
        </tr>
        {{/OBJNODES}}
      </tbody>      
    </table>
    </div>
  </body>
</html>
