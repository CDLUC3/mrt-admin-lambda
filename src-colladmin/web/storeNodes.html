<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css"></link>
    <style type="text/css">
    {{{APITABLE_CSS}}}
    </style>
    <script type="text/javascript">
    {{{COLL_LAMBDABASE_JS}}}
    </script>
    <script type="text/javascript">
    {{{APITABLE_JS}}}
    </script>
    <script type="text/javascript">
    {{{STORAGE_JS}}}
    </script>
    <script src="sorttable.js" type="text/javascript"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <div class="form-body">
    <h1>Manage Storage Nodes</h1>
    {{{COLLADMINNAV}}}
    <div>
      <button 
      class="colladmin storage-cancel-all-scans"
      title="Tell Replication to Stop All Storage Scans" 
   >Stop All Storage Scans</button>
   <div>
    <button 
    class="colladmin storage-allow-all-scans"
    title="Tell Replication to Stop All Storage Scans" 
   >Allow All Storage Scans</button>

    </div>
    <div>
      <table class="sortable results">
        <thead>
          <tr>
            <th>Node Number</th>
            <th>Node Name</th>
            <th>Access Mode</th>
            <th>Scan Status</th>
            <th>Scan Started</th>
            <th>Scan Updated</th>
            <th>Keys Processed</th>
            <th>% Complete</th>
            <th>Num to Review</th>
            <th>Num to Delete</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#NODES}}
          <tr>
            <th>{{number}}</th>
            <td>{{description}}</td>
            <td>{{access_mode}}</td>
            <td>{{scan_status}}</td>
            <td>{{created}}</td>
            <td>{{updated}}</td>
            <td class="dataint" data="{{keys_processed}}">{{keys_processed_fmt}}</td>
            <td>{{percent}}</td>
            <td class="dataint" data="{{num_review}}">{{num_review_fmt}}</td>
            <td class="dataint" data="{{num_deletes}}">{{num_deletes_fmt}}</td>
            <td>
              <button 
                title="Initiate a scan of a storage node"
                class="colladmin storage-scan-node"
                data-node-num="{{number}}"
                data-scan-id="{{inv_scan_id}}"
                data-node-name="{{description}}"
              >Queue Scan</button>
              <button 
                title="Cancel a scan of a storage node (db)"
                class="colladmin storage-cancel-scan-node"
                data-node-num="{{number}}"
                data-scan-id="{{inv_scan_id}}"
                data-node-name="{{description}}"
              >Cancel Scan</button>
              <button 
                title="Resume a scan of a storage node"
                class="colladmin storage-resume-scan-node"
                data-node-num="{{number}}"
                data-scan-id="{{inv_scan_id}}"
                data-node-name="{{description}}"
              >Resume Scan</button>
              <button 
                class="colladmin storage-review-scan-node"
                title="Review the untracked storage keys discovered in the last storage scan" 
                onclick="javascript:document.location='storeNodeReview.html?nodenum={{number}}&scanid={{inv_scan_id}}'"
              >Review Mismatches</button>
            </td>
          </tr>
          {{/NODES}}
        </tbody>
      </table>
    </div>
  </div>
  </body>
</html>
