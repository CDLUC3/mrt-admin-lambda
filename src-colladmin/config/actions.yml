# This file is not yet implemented
# 
# TODOs:
# [x] Modify all actions to repsond to the same method signature .perform_action()
# [ ] Determine handing needed for XML return for profile actions
# [x] Move param handing from the if/elsif/else block into action classes
# [x] Add generic logic to respond to .prod_support()
# [ ] Create the ability to lock sensitive operations or further restrict to special cognito groups
# [ ] Add descriptions
# [ ] Create automated testing where possible
# [ ] Add testing notes


# Properties
#   class - class to create
#   params - parameters to pass to the constructor
#   implentented: [true | false] default: true
#   prod_support: [true | false] default: true
#     new actions are kept false until they have been thoroughly tested in stage
#   category: 
#     Audit | Cognito | Delete object | Dev Ops | Ingest Admin Profiles | Ingest Batches and Folders |
#     Ingest Profiles | Inventory and Manifest | LDAP | Queue Management | Replication |
#     Storage Manifest | Storage Node Configuration | Storage Scan | Storage Scan Review
#   sensitivity: [readonly | reversible change | irreversible change | sensitive]
#   description: |
#     markdown description of the purpose of the action
#   testing: [automated | contextually automatable | automatable | manual]
#   testing_instructions: url to internal documentation describing how to perform a test
#   format: [text|json|xml], default: json
#   test_params: key/value pairs needed for testing
#   link-title: link title
#   nav:
#     path: navigation path
#     conditional:
#       param: navigation path with qualifying param

profiles:
  link-title: List Ingest Profiles (deployed on the Ingest Server)
  nav:
    path: /ingest/profiles
  class: IngestProfileAction
  category: Ingest Profiles
  sensitivity: readonly
  testing: automated
  description: |
    List all *ingest profiles* known to the ingest server.
    An ingest profile describes characteristics associated with a collection's configuration, such as its context mnemonic, description and primary storage node. 
    These profiles are managed in a github repository and are deployed to the server.
collection-locks:
  link-title: List Merritt Collections and Collection Level Locks
  nav:
    path: /collections/locks
  class: IngestCollectionLocksAction
  category: Ingest Profiles
  sensitivity: readonly
  testing: automated
  description: |
    List all collections.  Show which ones are frozen/thawed.  Collections generally exist in a thawed state.

    This report allows the admin to freeze/thaw ingest processing for a collection.
    
    Once ingest processing for a collection has been thawed, any items that have accumulated into the Held queue for the collection must be released.  

    Items can be individually released from the [queue page](/web/collIndex.html?path=queues) or they can be released as a set from this page.
adminprofiles:
  link-title: List Merritt Admin Profiles
  nav:
    path: /ingest/admin-profiles
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: readonly
  testing: automated
  description: |
    List all *admin profiles* (collection, owner, SLA) known to the ingest server.
    Admin profiles define the hierarchy in which collections are managed.
    Every collection must sit beneath a campus-specific SLA and a library or unit-specific owner profile. 
    Admin profiles also provide a basis on which to roll up annual storage recharge calculations.
    These profiles are managed in a github repository and are deployed to the server.
state:
  link-title: Ingest Service Status
  nav:
    path: /ingest/status
  class: IngestStateAction
  category: Queue Management
  sensitivity: readonly
  testing: automated
  description: |
    Display the state of the ingest service.
queues:
  link-title: Ingest Queue Jobs
  nav:
    path: /ingest/activity
  class: IngestQueueAction
  category: Queue Management
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the contents of the *ingest queue*. Items in this queue are slated to be processed by the Ingest service.
    From this screen, items can be requeued.
ingest-queue-by-profile:
  link-title: Ingest Queue Activity by Profile
  nav:
    path: /ingest/activity
  class: IngestQueueProfileCountAction
  category: Queue Management
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the counts of the *ingest queue* items by profile.
inv-queues:
  link-title: Inventory Queue Jobs
  nav:
    path: /inventory/activity
  class: InventoryQueueAction
  category: Queue Management
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the contents of the *inventory queue*. Items in this queue are slated to be processed by the Ingest service.
    From this screen, items can be requeued.
acc-queues:
  link-title: Access Queue Jobs
  nav:
    path: /access/activity
  class: AccessQueueAction
  category: Queue Management
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the contents of the *access queue*.
    From this screen, items can be requeued.
    Items in this queue are slated to be processed by the Store Access service. 
    More specifically, each queue item pertains to an end-user request to download an entire digital object. 
    Requests are routed to Access worker hosts based on object size (large or small).
batchFolders:
  link-title: Ingest Batch Folders
  nav:
    path: /ingest/folders
  class: IngestBatchFoldersAction
  category: Ingest Batches and Folders
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display details about the recently created ingest *batch folders*.
    In rare instances, an ingest is initiated but fails during the queueing step.  
    This view provides an opportunity to identify content that could not be successfully queued.

    ## Status Values:
    - PASS: Once the batch has been registered in the inventory database
    - WARN: The folder has existed for over one HOUR without registering in the inventory database
    - FAIL: The folder has existed for over one DAY without registering in the inventory database
batch:
  link-title: Ingest Batch
  nav:
    path: /ingest/activity
  class: IngestBatchAction
  category: Ingest Batches and Folders
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display details about an *ingest batch*.  A *batch* may contain one or more *jobs*.
job:
  link-title: Ingest Job
  nav:
    path: /ingest/activity
  class: IngestJobMetadataAction
  category: Ingest Batches and Folders
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display details about a specific *job* within an ingest batch.
manifest:
  link-title: Ingest Job Manifest Contents
  nav:
    path: /ingest/activity
  class: IngestJobManifestAction
  category: Ingest Batches and Folders
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the manifest defining the content to ingest in a specific *ingest job*.
files:
  link-title: Ingest Job Folder File List
  nav:
    path: /ingest/folders
  class: IngestJobFilesAction
  category: Ingest Batches and Folders
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the files remaining on the filesystem for an *ingest job*.
    After a successful submission:
    - producer files will be removed
    - system files will be retained
sword:
  link-title: Dryad Recent Jobs
  nav:
    path: /ingest/activity
  class: IngestSwordJobsAction
  category: Ingest Batches and Folders
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the most recent ingest jobs initiated from Dryad via the Sword service.
    After the page is displayed, a separate search is run to display the ARK and DOI associated with each job.
ldap/users:
  link-title: List Merritt LDAP Users
  nav:
    path: /ldap/users
  class: LDAPActionUsers
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: | 
    Display the list of Merritt users defined in the Merritt LDAP database.
ldap/user:
  link-title: List details for an Merritt LDAP User
  nav:
    path: /ldap/users
  class: LDAPActionUserDetailed
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: | 
    Display the details for a specific Merritt user defined in the Merritt LDAP database.
    The report conveys the permissions granted to the user on a collection basis.
ldap/roles:
  link-title: List Merritt LDAP Roles
  nav:
    path: /ldap/roles
  class: LDAPActionRoles
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: | 
    Display the set of permission groups (roles) defined in the Merritt LDAP database.
ldap/role:
  link-title: List details for an Merritt LDAP Role
  nav:
    path: /ldap/roles
  class: LDAPAction
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: | 
    Display information about a specific role defined in the Merritt LDAP database.
    *This report does not seem to be linked in the application**.
ldap/colls:
  link-title: List Merritt LDAP Collections
  nav:
    path: /ldap/collections
  class: LDAPActionColls
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: | 
    Display the Merritt collections as defined in the  Merritt LDAP database.
    Oddly, the Merritt UI uses the Collection name defined in LDAP as the definitive display name for the collection.
ldap/coll:
  link-title: List Details for an LDAP Collection
  nav:
    path: /ldap/collections
  class: LDAPActionCollDetailed
  category: LDAP
  sensitivity: readonly
  testing: automated
  test_params:
    coll: merritt_demo
  description: | 
    List user details for a Merritt collection as defined in the  Merritt LDAP database, including user roles.
ldap/collmap:
  link-title: Merritt LDAP / Inventory Database Mismatches
  nav:
    path: /ldap/issue-list
  class: LDAPActionCollmap
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: | 
    Generate a report that maps entities in the Merritt LDAP database to entries in the Merritt inventory database.
    For any items that do not match, an error will be reported in the report.  This indicates that maintenance needs to be performed on the LDAP entries for Merritt.
ldap/collark:
  link-title: List LDAP Users for a specific collection ARK
  nav:
    path: /ldap/collections
  class: LDAPActionCollArk
  category: LDAP
  sensitivity: readonly
  testing: automated
  description: |
    This report maps a *collection ark* (from the inventory database) to the set of LDAP permissions defined for that collection.
instances:
  link-title: List and Describe Merritt EC2 Servers
  nav:
    path: /merritt-internal/servers
  class: TagAction
  category: Dev Ops
  sensitivity: readonly
  testing: automated
  description: |
    Generate a report describing the EC2 servers used by Merritt domain.  Server details are discovered by querying EC2 tags.
ssm-describe:
  link-title: List and Describe Merritt SSM Variables
  nav:
    path: /merritt-internal/ssm-variables
  class: SsmDescribeAction
  category: Dev Ops
  sensitivity: readonly
  testing: automated
  description: |
    Generate a report describing the SSM variables used by a Merritt domain.
    These variables are compared against a [registry of expected SSM variables](https://github.com/CDLUC3/mrt-admin-lambda/blob/main/src-colladmin/config/ssm.registry.yml).
storage-get-manifest:
  link-title: Get Storage Manifest for an Object from Cloud Storage
  nav:
    path: /storage/manifest
  class: StorageAction
  category: Storage Manifest
  sensitivity: readonly
  testing: automated
  format: xml
  test_params:
    ark: ark:/99999/fk4dv31c0b
    nodenum: 9502
  description: |
    Download the XML *storage manifest* representation of a object on a specific storage node.  This request will be forwarded to the storage service.
storage-get-augmented-manifest:
  link-title: Fix and Regenerate Storage Manifest for an Object from Cloud Storage
  nav:
    path: /storage/manifest
  implemented: false
  category: Storage Manifest
  sensitivity: readonly
  testing: automatable
  description: |
    #### Future Feature
    Download a programmatically repaired manifest generated by the storage/replication service.
    This feature is anticipated to be utilized to resolve specific problems that occur infrequently.
storage-get-ingest-checkm:
  link-title: Generate Ingest Checkm Manifest Using Content from Cloud Storage
  nav:
    path: /storage/manifest
  class: StorageAction
  category: Storage Manifest
  sensitivity: readonly
  testing: automated
  format: text
  test_params:
    ark: ark:/99999/fk4dv31c0b
    nodenum: 9502
  description: |
    Download an *ingest manifest checkm* representation of an object on a specific storage node.  
    This file could be utilized to re-ingest an object under a new ark.
cognito-users:
  link-title: List Merritt Admin Tools Users
  nav:
    path: /merritt-internal/users
  class: CognitoAction
  category: Cognito
  sensitivity: readonly
  testing: automated
  description: |
    Display the list of users who have authenticated to the Merritt Admin *Cognito User Pool*.
    Users are not created explicitly in the admin tool. A user is created by (1)performing an SSO login or (2)registering as a non-SAML user.  
    This screen contains buttons that could trigger the addition/removal of specific users from a *Cognito User Group*.

    Note: While the tool supports non-SAML users, in practice, we have not authorized any non-SAML users.  This is intended for partners such as Dryad staff.
replication-state:
  link-title: Display the Status of the Replciation Microservice
  nav:
    path: /replic/status
  class: ReplicationAction
  category: Dev Ops
  sensitivity: readonly
  testing: automated
  format: xml
  description: |
    Display the *storage scan status* of the replication service.
    This function determines whether or not to enable the *Stop Storage Scan* and *Enable Storage Scan* buttons.
storage-review-csv:
  link-title: Generate and download a CSV of storage scan exceptions
  nav:
    path: /storage-scan/csv
  class: ReplicationAction
  category: Storage Scan
  sensitivity: readonly
  testing: manual
  description: |
    Download a CSV file for all scan results from a specific storage node that have been marked with a *Review* status.
    This CSV can be edited in Excel in order to apply bulk status/note changes to the scan results.
ingest-locks:
  link-title: Display ingest storage locks on specific object arks
  nav:
    path: /merritt-internal/object-locks
  class: IngestLockAction
  category: Lock Management
  sensitivity: readonly
  testing: contextually automated
  description: |
    Display the ingest storage locks existing for object arks.

# Operations that change system state - Reversible

submissions/pause:
  link-title: Pause all ingest processing
  nav:
    path: /ingest/pause
  class: PostToIngestAction
  params: ["admin/submissions/freeze"]
  category: Queue Management
  sensitivity: reversible change
  testing: automatable
  description: |
    Pause all ingest processing.  Return the effective state of the ingest queues.
    This is typically done before a patching cycle or a software release that impacts ingest or storage.
submissions/unpause:
  link-title: Unpause all ingest processing
  nav:
    path: /ingest/unpause
  class: PostToIngestAction
  params: ["admin/submissions/thaw"]
  category: Queue Management
  sensitivity: reversible change
  testing: automatable
  description: |
    Unpause ingest processing.  Return the effective state of the ingest queues.
toggle_harvest:
  link-title: Toggle the harvest flag for a collection
  nav:
    path: /collection-admin/properties
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: reversible change
  testing: automatable
  description: |
    Toggle the *harvest* flag for a collection.
    The harvest flag determines whether or not a collection can be crawled from the OAI service.    
unlock-coll:
  link-title: Unlock ingest for a collection
  nav:
    path: /ingest/collection-lock
  class: CollQueueAction
  params: ["admin/submission/thaw/coll"]
  category: Queue Management
  sensitivity: reversible change
  testing: automatable
  description: |
    Unlock ingest for a collection.
lock-coll:
  link-title: Lock ingest for a collection
  nav:
    path: /ingest/collection-lock
  class: CollQueueAction
  params: ["admin/submission/freeze/coll"]
  category: Queue Management
  sensitivity: reversible change
  testing: automatable
  description: |
    Lock ingest for a collection.
release-coll-queue-items:
  link-title: Release any held items for a collection
  nav:
    path: /ingest/queue-items
  class: CollIterateQueueAction
  params: ["admin/release-all/queue/coll"]
  category: Queue Management
  sensitivity: reversible change
  testing: automatable
  description: |
    Release any held items for a collection.
storage-force-audit-for-object:
  link-title: Trigger audit processing for all files in an object on a specific node
  nav:
    path: /audit/object
  class: StorageAction
  category: Audit
  sensitivity: reversible change
  testing: automatable
  description: |
    Trigger audit processing for all files in an object on a specific node.
storage-rerun-audit-for-object:
  link-title: Trigger audit processing for all unverified files in an object on a specific node
  nav:
    path: /audit/object
  class: StorageAction
  category: Audit
  sensitivity: reversible change
  testing: automatable
  description: |
    Trigger audit processing for all *unverified* files in an object on a specific node.
    This action is occasionally needed when the audit server is halted or experienced a networking issue on a previous audit.
storage-force-replic-for-object:
  link-title: Re-trigger replication for an existing object
  nav:
    path: /replic/object
  class: StorageAction
  category: Replication
  sensitivity: reversible change
  testing: automatable
  description: |
    Re-trigger replication for an existing object.  The replication service will resolve incomplete replications for files in the object.
    This action is occasionally needed when the replic server is halted or experienced a networking issue on a previous replication.
storage-clear-audit-batch:
  link-title: Release old audit batches
  nav:
    path: /audit/batches
  class: StorageAction
  category: Audit
  sensitivity: reversible change
  testing: automatable
  description: |
    The audit service processes a block of objects at one time.  All database updates are written back to the database in a batch.
    If the audit service is shut down while processing a batch, some batches may appear to still be actively processing.
    This function clears all audit batches older than a specified amount of time.
storage-retry-audit-status:
  link-title: Trigger an audit retry for all audit records with a specific status
  nav:
    path: /audit/retry
  class: StorageAction
  category: Audit
  sensitivity: reversible change
  testing: automatable
  description: |
    Trigger an audit retry for all audit records with a specific status.
storage-cancel-all-scans:
  link-title: Halt all storage scan processing by the replciation service
  nav:
    path: /storage-scan/pause
  class: ReplicationAction
  category: Storage Scan
  sensitivity: reversible change
  testing: automatable
  description: |
    Halt all storage scan processing by the replciation service.  This will give priority to content replication.
storage-allow-all-scans:
  link-title: Re-enable storage scan processing by the replciation service
  nav:
    path: /storage-scan/pause
  class: ReplicationAction
  category: Storage Scan
  sensitivity: reversible change
  testing: automatable
  description: |
    Re-enable storage scan processing by the replciation service.  This can be run after halting/canceling all scans.
storage-cancel-scan-node:
  link-title:  Cancel storage scan processing on a specific storage node by the replication service
  nav:
    path: /storage-scan/pause
  class: ReplicationAction
  category: Storage Scan
  sensitivity: reversible change
  testing: automatable
  description: |
    Cancel storage scan processing *on a specific storage node* by the replication service.  
storage-resume-scan-node:
  link-title:  Resume storage scan processing on a specific storage node by the replication service
  nav:
    path: /storage-scan/pause
  class: ReplicationAction
  category: Storage Scan
  sensitivity: reversible change
  testing: automatable
  description: |
    Resume storage scan processing *on a specific storage node* by the replication service.  
storage-clear-scan-entries:
  link-title:  Clear storage scan entries for a specific ark
  nav:
    path: /storage-scan/clear
  class: StorageAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Clear storage scan entries for a specific ark.
    This function is intended to be run after *rebuilding an inventory record* via the admin tool.  
storage-scan-node:
  link-title: Initiate storage scan processing on a specific storage node by the replication service
  nav:
    path: /storage-scan/initiate
  class: ReplicationAction
  category: Storage Scan
  sensitivity: reversible change
  testing: automatable
  description: |
    Initiate storage scan processing *on a specific storage node* by the replication service.  
    
    In general, the storage scan process uses the S3 API to iterate over items found on a storage node.
    For SDSC storage, the iterator api call does not function properly.  
    Instead, an inventory dump must be manually requested from SDSC and uploaded to S3 for comparison processing.
storage-delete-node-key:
  link-title: Mark a single scan result with a DELETE status
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Mark a single scan result with a *DELETE* status.  
storage-delete-node-page:
  link-title: Mark a page of scan results with a DELETE status
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Mark a page of scan results with a *DELETE* status.  
storage-hold-node-key:
  link-title: Mark a single scan result with a HOLD status
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Mark a single scan result with a *HOLD* status.  
storage-hold-node-page:
  link-title: Mark a page of scan results with a HOLD status
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Mark a page of scan results with a *HOLD* status.  
storage-review-node-key:
  link-title: Mark a single scan result with a REVIEW status
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Mark a single scan result with a *REVIEW* status.  
storage-review-node-page:
  link-title: Mark a page of scan results with a REVIEW status
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: reversible change
  testing: manual
  description: |
    Mark a page of scan results with a *REVIEW* status.  

# Operations that change system state - Not reversible

submit-profile:
  link-title: Submit a dummy object using a newly created admin profile
  nav:
    path: /collection-admin/dummy-object
  class: SubmitProfileAction
  params: ["poster/update"]
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Submit a dummy object using a newly created admin profile.
    This will trigger the creation of an object in the Merritt inventory database.
set_mnemonic:
  link-title:  Set the mnemonic field for a collection to match the value defined in the collection admin profile
  nav:
    path: /collection-admin/properties
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Set the *mnemonic* field for a collection to match the value defined in the collection admin profile.
    Once set, this value cannot be reset.
    This option must be manually run due to a legacy limitation of the collection creation process for Merritt.
set_coll_name:
  link-title:  Set the description field for a collection to match the value defined in the collection admin profile
  nav:
    path: /collection-admin/properties
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Set the *description* field for a collection to match the value defined in the collection admin profile.
    To apply future changes to this field, you must update the collection admin profile.
set_sla_name:
  link-title:  Set the description field for an SLA to match the value defined in the SLA admin profile
  nav:
    path: /collection-admin/properties
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Set the *description* field for an SLA to match the value defined in the SLA admin profile.
    To apply future changes to this field, you must update the SLA admin profile.
set_own_name:
  link-title: Set the description field for an Owner to match the value defined in the Owner admin profile
  nav:
    path: /collection-admin/properties
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Set the *description* field for an Owner to match the value defined in the Owner admin profile.
    To apply future changes to this field, you must update the Owner admin profile.
create_owner_record:
  link-title: Generate an owner record in the Merritt inventory database based on the submission of a dummy object using the Owner Admin profile
  nav:
    path: /collection-admin/create
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Generate an owner record in the Merritt inventory database based on the submission of a dummy object using the Owner Admin profile.
create_coll_record:
  link-title: Generate an SLA record in the Merritt inventory database based on the submission of a dummy object using the SLA Admin profile
  nav:
    path: /collection-admin/create
  class: AdminProfileAction
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Generate an SLA record in the Merritt inventory database based on the submission of a dummy object using the SLA Admin profile.
createProfile/profile:
  link-title: Send a request to the ingest service to generate a new Ingest Profile
  nav:
    path: /collection-admin/create
  class: PostToIngestMultipartAction
  params: ["admin/profile/profile"]
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Send a request to the ingest service to generate a new *Ingest Profile*.
    A new ARK will be minted as needed.
createProfile/collection:
  link-title: Send a request to the ingest service to generate a new Collection Admin Profile
  nav:
    path: /collection-admin/create
  class: PostToIngestMultipartAction
  params: ["admin/profile/collection"]
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Send a request to the ingest service to generate a new *Collection Admin Profile*.
    A new ARK will be minted as needed.
createProfile/owner:
  link-title: Send a request to the ingest service to generate a new Owner Admin Profile
  nav:
    path: /collection-admin/create
  class: PostToIngestMultipartAction
  params: ["admin/profile/owner"]
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Send a request to the ingest service to generate a new *Owner Admin Profile*.
    A new ARK will be minted as needed.
createProfile/sla:
  link-title: Send a request to the ingest service to generate a new SLA Admin Profile
  nav:
    path: /collection-admin/create
  class: PostToIngestMultipartAction
  params: ["admin/profile/sla"]
  category: Ingest Admin Profiles
  sensitivity: irreversible change
  testing: manual
  description: |
    Send a request to the ingest service to generate a new *SLA Admin Profile*.
    A new ARK will be minted as needed.
queue-delete:
  link-title: Remove an item from a Zookeeper queue
  nav:
    path: /queue/action
  class: QueueAction
  params: ["admin/deleteq"]
  category: Queue Management
  sensitivity: irreversible change
  testing: manual
  description: |
    Remove an item from a Zookeeper queue.
requeue:
  link-title: Re-queue an item from a Zookeeper queue
  nav:
    path: /queue/action
  class: QueueAction
  params: ["admin/requeue"]
  category: Queue Management
  sensitivity: irreversible change
  testing: manual
  description: |
    Re-queue an item from a Zookeeper queue.
hold-queue-item:
  link-title: Move a pending item from in Zookeeper queue to a Held status
  nav:
    path: /queue/action
  class: QueueAction
  params: ["admin/hold"]
  category: Queue Management
  sensitivity: irreversible change
  testing: manual
  description: |
    Move a pending item from in Zookeeper queue to a Held status.
release-queue-item:
  link-title: Release a held item from in Zookeeper queue to a Pending status
  nav:
    path: /queue/action
  class: QueueAction
  params: ["admin/release"]
  category: Queue Management
  sensitivity: irreversible change
  testing: manual
  description: |
    Release a held item from in Zookeeper queue to a Pending status.
apply-review-changes:
  link-title: Apply bulk changes to storage scan results by uploading a CSV containing a set of desired changes
  nav:
    path: /storage-scan/review
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: irreversible change
  testing: manual
  description: |
    Apply bulk changes to storage scan results by uploading a CSV containing a set of desired changes.

# Sensitive Operations

cognito-remove-user-from-group:
  link-title: Remove a Cognito User from a specific Cognito User Group
  nav:
    path: /merritt-internal/users
  class: CognitoAction
  category: Cognito
  sensitivity: sensitive
  testing: automatable
  description: |
    Remove a *Cognito User* from a specific *Cognito User Group*.
cognito-add-user-to-group:
  link-title: Add a Cognito User to a specific Cognito User Group
  nav:
    path: /merritt-internal/users
  class: CognitoAction
  category: Cognito
  sensitivity: sensitive
  testing: automatable
  description: |
    Add a *Cognito User* to a specific *Cognito User Group*.
storage-rebuild-inventory:
  link-title: Rebuild inventory record from storage manifest
  nav:
    path: /storage/repair
  class: StorageAction
  category: Inventory and Manifest
  sensitivity: sensitive
  testing: automatable
  description: |
    Retrieve a storage manifest from the storage service.  
    Send that manifest to the Inventory service in order to re-build the inventory record from the storage manifest.
storage-update-manifest:
  link-title: Upload a repaired storage manifest to override an existing one
  nav:
    path: /storage/repair
  implemented: false
  category: Inventory and Manifest
  sensitivity: sensitive
  testing: manual
  description: |
    #### Future Feature: upload a repaired storage manifest to override an existing one
storage-add-node-for-collection:
  link-title: Add a secondary storage node to the configuration for a collection
  nav:
    path: /storage/node-configuration
  class: StorageAction
  category: Storage Node Configuration
  sensitivity: sensitive
  testing: manual
  description: |
    Add a secondary storage node to the configuration for a collection.
storage-del-node-for-collection:
  link-title: Remove a storage node from a collection configuration
  nav:
    path: /storage/node-configuration
  class: StorageAction
  category: Storage Node Configuration
  sensitivity: sensitive
  testing: manual
  description: |
    Remove a storage node from a collection configuration.
    All objects in the collection will need to be cleared from the storage node.
replic-delete-coll-batch-from-node:
  link-title: Delete a batch of objects from the collection from storage node
  nav:
    path: /storage/node-configuration/contents
  class: ReplicationAction
  category: Storage Node Configuration
  sensitivity: sensitive
  testing: manual
  description: |
    Delete a batch of objects from the collection from this node.  This may need to run iteratively.
storage-del-object-from-node:
  link-title: Delete object from storage node
  nav:
    path: /storage/node-configuration/contents
  implemented: false
  category: Delete object
  sensitivity: sensitive
  testing: manual
  description: |
    #### Future feature - Probably not needed
    [Feature Design](https://cdluc3.github.io/mrt-doc/diagrams/store-admin-del-node-obj)
storage-change-primary-for-collection:
  link-title: Change primary storage node for collection
  nav:
    path: /storage/node-configuration
  implemented: false
  category: Storage Node Configuration
  sensitivity: sensitive
  testing: manual
  description: |
    #### Future feature
    [Feature Design](https://cdluc3.github.io/mrt-doc/diagrams/store-admin-change-primary-node)
storage-reroute-ui-for-collection:
  link-title: Re-route UI storage node for collection
  nav:
    path: /storage/node-configuration
  implemented: false
  class: ReplicationAction
  sensitivity: sensitive
  testing: manual
  description: |
    #### Future feature - Probably not in scope for the project
    [Feature Design](https://cdluc3.github.io/mrt-doc/diagrams/store-admin-reroute-uistorage-perform-delete-node-key)
storage-perform-delete-node-key:
  link-title: Delete copy of a file from a storage node
  nav:
    path: /storage-scan/repair
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: sensitive
  testing: manual
  description: |
    Process the delete of a single storage scan record.
storage-perform-delete-node-batch:
  link-title: Process all scan results marked with a DELETE status
  nav:
    path: /storage-scan/repair
  class: ReplicationAction
  category: Storage Scan Review
  sensitivity: sensitive
  testing: manual
  description: |
    Process all scan results marked with a *DELETE* status.
storage-delete-obj:
  link-title: Trigger the deletion of a Merritt Object
  nav:
    path: /inventory/delete
  implemented: false
  category: Storage Scan Review
  sensitivity: sensitive
  testing: manual
  description: |
    #### Future feature
    Trigger the deletion of a Merritt Object.  Save a tombstone record.
    [Feature Design](https://cdluc3.github.io/mrt-doc/diagrams/store-admin-del-obj)
