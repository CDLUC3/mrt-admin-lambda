<html>
  <head>
    <meta charset="utf-8"/>
    <script	src="//ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css"></link>
    <!-- https://www.w3schools.com/howto/howto_css_dropdown_navbar.asp -->
    <style type="text/css">
      {{{APITABLE_CSS}}}
      {{{NAVMENU_CSS}}}
    </style>
    <script type="text/javascript">
    {{{LAMBDABASE_JS}}}
    </script>
    <script type="text/javascript">
    {{{APITABLE_JS}}}
    </script>
    <script type="text/javascript">
    {{{DRAWDOWN_JS}}}
    </script>
    <script type="text/javascript">
      var nav_to_hash= function() {
        var h = window.location.hash;
        if (h) {
          if (h!='') {
            show_nav_section(h.replace('#', ''));
            return;
          }
        } 
        if (document.location.search == "") {
          show_nav_section('.nav_section_default');
        }
      }
      $(document).ready(nav_to_hash);
      $(window).on('hashchange', nav_to_hash);
    </script>
    <script src="sorttable.js" type="text/javascript"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.2.0/chart.umd.js"></script>            
    <title>AdminTool - Merritt</title>
  </head>
  <body>
    {{{NAVMENU}}}
    <h1>AdminTool - Merritt</h1>
    <h4 class="report_path"></h4>
    {{{ADMINNAV}}}
    {{{BUTTONS}}}
    <div id="report-description">
    </div>
    <div id="chartdiv">
      <canvas id="myChart"></canvas>
    </div>          
    <div id="menu">

    <div class="nav_section nav_section_default">
      <h2>Common Tasks</h2>

      <h3>System Consistency</h3>
      <ul>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=report">Consistency Reports <span id="consistency">...</span></a></li>
      </ul>

      <h3>Bytes Recently Ingested</h3>
      <ul>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_hour">Recent Bytes ingested by hour</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_hour&days=30">Recent Bytes ingested by day - last 30 days</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_week">Bytes ingested by week - last year</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_month">Bytes ingested by Month</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_year">Bytes ingested by Year</a></li>
      </ul>
      
      <h3>Object Management</h3>
      <ul>
        <li>
          <fieldset>
            <legend>Go To Ark:</legend>
            <form action="{{COLLADMIN_ROOT}}/web/storeObjectNodes.html">
              <input type="text" name="ark" value="" size="50"/>
              <input type='submit'/>
            </form>
            </fieldset>      
        </li>
      </ul>
    </div>


    <div class="nav_section nav_sysinfo">
      <h2>System Information</h2>
      <ul>
        <li><a class="helpinfo" href="{{ADMINTOOL_BASE}}/web/describeReports.html">Admin Report Descriptions</a></li>
        <li><a class="helpinfo" href="{{COLLADMIN_ROOT}}/web/describeActions.html">Collection Admin Action Descriptions</a></li>
      </ul>
    </div>

    <div class="nav_section nav_collections">
      <h2>Collections Reports</h2>
    </div>

    <div class="nav_section nav_objects nav_search nav_search_ark">
      <h3>Search for a specific object by ARK</h3>
      <ul>
        <li>
          <fieldset>
            <legend>Go To Ark:</legend>
            <form action="{{COLLADMIN_ROOT}}/web/storeObjectNodes.html">
              <input type="text" name="ark" value="" size="50"/>
              <input type='submit'/>
            </form>
            </fieldset>      
        </li>
      </ul>
    </div>

    <div class="nav_section nav_objects nav_search nav_search_id">
      <h3>Search for a specific object by Object Id</h3>
      <ul>
        <li>
          <fieldset>
            <legend>Go To Object Id:</legend>
            <form action="{{COLLADMIN_ROOT}}/web/storeObjectNodes.html">
              <input type="text" name="id" value="" size="50"/>
              <input type='submit'/>
            </form>
            </fieldset>      
        </li>
      </ul>
    </div>

    <div class="nav_section nav_objects nav_search nav_search_metadata">
      <h3>Metadata Queries: Objects</h3>
      <ul>
        <li class="objects">
          <form action="{{ADMINTOOL_HOME}}">
            Object(s) by Ark:
            <input name="ark" type="text" value="ark:/" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_ark"/>
            <input type="submit" value="Go!"/>
            <input type="button" onclick="javascript:document.location='ark.html';" value="Multiple Arks"/>
          </form>
        </li>
        <li class="objects">
          <form action="{{ADMINTOOL_HOME}}">
            Object(s) by Title:
            <input name="title" type="text" value="" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_title"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
        <li class="objects">
          <form action="{{ADMINTOOL_HOME}}">
            Object(s) by Author:
            <input name="author" type="text" value="" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_author"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
        <li class="objects">
          <form action="{{ADMINTOOL_HOME}}">
            Object(s) by Local ID:
            <input name="localid" type="text" value="" size=40 title="Use a % as a wildcard search string"/>
            <input name="path" type="hidden" value="objects_by_local_id"/>
            <input type="submit" value="Go!"/>
            <input type="button" onclick="javascript:document.location='doi.html';" value="Multiple DOIs"/>
            <input type="button" onclick="javascript:document.location='localid.html';" value="Multiple Localids"/>
          </form>
        </li>
        <li class="objects">
          <form action="{{ADMINTOOL_HOME}}">
            Object(s) by Batch Container Name:
            <input name="container" type="text" value="" size=40 title="This would generally be a .checkm or .zip file"/>
            <input name="path" type="hidden" value="objects_by_container_name"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
      </ul>

    </div>

    <div class="nav_section nav_objects nav_objects_files">
      <h3>Objects Files</h3>
      <ul>
        <li class="files">
          <form action="{{ADMINTOOL_HOME}}">
            Object(s) by Filename:
            <input name="file" type="text" value="" size=60 title="Use a % as a wildcard search string"/>
            <br/>
            Collection (required for a performant query):
            <select name="mnemonic">
              {{#MCOLLS}}
              <option value="{{mnemonic}}">{{mnemonic}}: {{name}}</option>
              {{/MCOLLS}}
            </select>
            <input name="path" type="hidden" value="files_by_name_coll"/>
            <input type="submit" value="Go!"/>
          </form>
        </li>
      </ul>
    </div>
  
    <div class="nav_section nav_merritt_internals">
      <h2>Merritt Internals</h2>
      <ul>
        <li class="config"><a href="{{COLLADMIN_HOME}}?path=instances&timeout=1">Merritt Servers (quick load)</a></li>
        <li class="config"><a href="{{COLLADMIN_HOME}}?path=instances">Merritt Servers</a></li>
        <li class="config"><a href="{{COLLADMIN_HOME}}?path=ssm-describe">SSM Parameter Registry</a></li>
        <li class="config"><a href="{{ADMINTOOL_HOME}}?path=lambda_tag">Check Admin Deployment Tag</a></li>
        <li class="config"><a href="{{COLLADMIN_HOME}}?path=coll_lambda_tag">Check CollAdmin Deployment Tag</a></li>
      </ul>
    </div>


    <div class="nav_section nav_audit">
      <h2>Audit Service</h2>
    </div>



    <div class="nav_section nav_ingest">
      <h2>Ingest Service</h2>
    </div>

    <div class="nav_section nav_ingest nav_ingest_activity nav_manage_queues">
      <h3>Ingest Activity</h3>
      <ul>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_hour">Recent Bytes ingested by hour</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_hour&days=30">Recent Bytes ingested by day - last 30 days</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_week">Bytes ingested by week - last year</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_month">Bytes ingested by Month</a></li>
        <li class="graph"><a href="{{ADMINTOOL_HOME}}?path=ingest_bytes_by_year">Bytes ingested by Year</a></li>
      </ul>
    </div>
    
  
  
    
    <div class="nav_section nav_storage nav_storage_config">
      <h3>Storage Configuration</h3>
      <ul>
        <li class="node"><a href="{{ADMINTOOL_HOME}}?path=collnodes">Storage Nodes by Collection</a></li>
        <li class="node"><a href="{{ADMINTOOL_HOME}}?path=collection_node_cleanup_required">Storage Node/Collection Cleanup Needed</a></li>
      </ul>
    </div>
    

    <div class="nav_section nav_manage">
      <h2>Administer Merritt</h2>
    </div>

    <div class="nav_section nav_manage nav_manage_queues">
    <div class="nav_section nav_manage nav_manage_store">
      <h3>Manage Storage Nodes</h3>
      <ul>
        <li class="config"><a href="{{COLLADMIN_ROOT}}/web/storeCollNodes.html">Manage Storage Nodes for a Collection</a></li>
        <li class="config"><a href="{{COLLADMIN_ROOT}}/web/storeNodes.html">Storage Node Management</a></li>
      </ul>
      <h3>Manage Audit Queues</h3>
      <ul>
        <li class="config"><a href="{{COLLADMIN_ROOT}}/web/storeQueues.html">Manage Audit Queues and Audit Status</a></li>
      </ul>
    </div>

  </div>
  
    </div>
    <div id="data" class="admin-tool">
      <div id="alternative">
        <ul style="display: none">
          <li>Alternative URL's go here</li>
        </ul>
      </div>
      <table id="data-table" class="sortable results"/>
    </div>
    <div id="in-progress-container">
      <div id="in-progress">
        <h2>Query in Progress</h2>
        <div id="iprogress">--</div>
      </div>
    </div>
    <script src="sorttable.js" type="text/javascript"></script>
  </body>
</html>
